<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
  <ModulePrefs title="Gallery">
  	<Require feature="dynamic-height"/> 
  	<Require feature="opensocial-0.8" />
  </ModulePrefs>
  <UserPref name="siteDomain" display_name="Site Domain" datatype="string" required="true"/>
  <UserPref name="siteName" display_name="Site Name" datatype="string" required="true"/>
  <UserPref name="galleryRoot" display_name="Gallery Root" datatype="string" required="true"/>
  <UserPref name="galleryTitle" display_name="Gallery Title" datatype="string" />
  <UserPref name="historyLength" display_name="Number of Years to Show" datatype="string" />
  
  <Content type="html" view="default">
     <![CDATA[
     	<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
		<meta charset="utf-8">
		<!--<meta name="viewport" content="width=device-width, initial-scale=1">-->

		<link rel="stylesheet" href="https://abvasvmc.github.io/css/bootstrap.min.css">
		
		<script src="https://abvasvmc.github.io/js/jquery.min.js"></script>
		<script src="https://abvasvmc.github.io/js/bootstrap.min.js"></script>
		<script src="https://abvasvmc.github.io/js/moment.js"></script>
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>

		<link rel="stylesheet" href="https://abvasvmc.github.io/gallery.css">
		<script src="https://abvasvmc.github.io/gallery2.js"></script>
	  
		<script type="text/javascript">
			//Site Specific Configuration
			//===========================
			var siteDomain = "abva.org";
			var siteName = "www3";
		</script>

		<div id="myGallery">
			<div id="myGalleryTitle" class="page-title"></div>
			<div id="pageLinks"></div>
			<div id="galleryDataRoot">
			</div>
		</div>
		
		<script type="text/javascript">
		
			//Initialize feed loader
			google.load("feeds", "1");
			
			//Page initialization routine. This is called by google.setOnLoadCallback callback
			function initialize(feedUrlSeed) {

				InitGallery();
				
				////gadgets.window.adjustHeight();
			} //End: function initialize()
			

			//Calling initialization routing on page loading
			$(document).ready(function () {				
				initialize(Math.floor((Math.random() * 100000)));
				//KR: gadgets.window.adjustHeight();
			});			
			
//			gadgets.util.registerOnLoadHandler(function() { 
//				gadgets.window.adjustHeight();
//		   	});
		   

		   
//			window.addEventListener('popstate', function(event)
//			{
//			    alert("location: " + document.location + ", state: " + JSON.stringify(event.state));
//			});				

		   //Resize listener for gadget resizing on layout changes
		   var prevWindowWidth= -1;
		   $( window ).resize(function() {
		        if(prevWindowWidth < 0){
		        	prevWindowWidth = $(window).width();
		        }
		        else{
		        	var w = $(window).width();
		        	var resize_required = (prevWindowWidth >= 768 && w < 768) ||
		        						  (prevWindowWidth < 768 && w >= 768) ||
		        						  (prevWindowWidth >= 992 && w < 992) ||
		        						  (prevWindowWidth < 992 && w >= 992);
		        	if(resize_required){
		        		//gadgets.window.adjustHeight();
		        	}
		        	
		        	prevWindowWidth = w;					  
		        }
		    });	
						
		</script>
     ]]>
  </Content> 
</Module>